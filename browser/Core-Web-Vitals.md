# 코어 웹 바이탈(Core Web Vitals)

## 정의 및 배경

코어 웹 바이탈은 구글이 제시한 **사용자 경험 중심의 웹 성능 측정 지표** 과거에는 `load` 이벤트나 `DOMContentLoaded` 같은 기술적 시점으로 성능을 측정했으나, 이는 실제 사용자가 체감하는 경험을 제대로 반영하지 못했음

'빠르다'는 개념이 기기, 네트워크, 사용자 목적에 따라 달라지는 상대적 개념이기 때문에, 구글은 2021년부터 이 지표들을 **SEO(검색 엔진 순위)**에도 반영하기 시작

---

## 3대 핵심 지표

### 1. **LCP (Largest Contentful Paint)** - 로딩 성능

**측정 대상:**

- 뷰포트 내에서 가장 큰 이미지 또는 텍스트 블록이 렌더링되는 시간
- 초기 렌더링 성능을 측정하는 지표

**구체적 예시:**
사용자가 페이지에 진입했을 때 가장 먼저 눈에 들어오는 큰 콘텐츠 요소가 LCP의 측정 대상

- 쇼핑몰 메인 페이지의 대형 프로모션 배너 이미지
- 뉴스 사이트 상단의 헤드라인 기사 썸네일
- 넷플릭스 홈 화면의 추천 콘텐츠 포스터 이미지
- 블로그 게시글의 대표 이미지나 제목
- 유튜브 영상 페이지의 비디오 플레이어 영역

**기준:**

- ✅ 좋음: **2.5초 이내**
- ⚠️ 개선 필요: 2.5~4초
- ❌ 나쁨: 4초 이상

**측정 시점:** 초기 페이지 로드 중

---

### 2. **FID → INP** - 상호작용성 (반응 속도)

#### FID (First Input Delay) - 구 지표

**측정 대상:**

- 사용자가 **처음** 상호작용(클릭, 입력 등)할 때부터 브라우저가 이벤트 핸들러 처리를 시작하기까지의 지연 시간

**구체적 예시:**

- 페이지 진입 후 "제목을 입력해주세요" 인풋을 처음 클릭했을 때의 응답 시간

**기준:** 100ms 이내

**한계점:** 첫 번째 상호작용만 측정하므로 전체 페이지 경험을 대표하지 못함

#### INP (Interaction to Next Paint) - 신규 지표

**도입 시기:** 2024년 3월부터 FID를 대체

**측정 대상:**

- 페이지에 머무는 동안의 **모든 상호작용**을 고려
- 사용자 입력부터 다음 프레임이 그려질 때까지의 반응 속도

**FID와의 차이점:**

- FID: 첫 번째 클릭(아코디언 메뉴)만 측정 → 빠를 수 있음
- INP: 이후 다른 버튼들의 응답까지 모두 측정 → 더 신뢰성 높음

**구체적 예시:**
첫 번째 클릭은 빨라도, 이후 다른 버튼의 응답이 느린 경우를 감지함

**기준:**

- ✅ 좋음: **200ms 이내**
- ⚠️ 개선 필요: 200~500ms
- ❌ 나쁨: 500ms 이상

**측정 시점:** 사용자가 페이지와 상호작용하는 전체 기간 (리렌더링 시)

---

### 3. **CLS (Cumulative Layout Shift)** - 시각적 안정성

**측정 대상:**

- 예상치 못한 레이아웃 이동(밀림 현상)을 수량화
- 렌더링 중 발생하는 불안정성을 측정

**주요 발생 원인:**

- 리소스가 비동기적으로 로드될 때 (예: 이미지)
- 동적 콘텐츠가 삽입될 때 (예: 광고, 알림 배너)

**구체적 나쁜 예시:**

- 뉴스 기사를 읽다가 갑자기 상단에 광고가 로드되면서 읽던 부분이 아래로 밀려남
- 쇼핑몰에서 "구매하기" 버튼을 클릭하려는 순간, 쿠폰 배너가 뜨면서 "취소" 버튼을 누르게 됨
- 인스타그램 피드를 보다가 "좋아요" 버튼을 누르려는데, 상단에 스토리 섹션이 늦게 로드되면서 엉뚱한 게시물에 좋아요를 누름
- 블로그 글을 읽다가 본문 이미지가 뒤늦게 로드되면서 텍스트가 갑자기 아래로 쭉 밀려남
- 모바일 검색 결과에서 첫 번째 링크를 클릭하려는데, 상단에 "앱 다운로드" 배너가 나타나면서 두 번째 링크를 클릭하게 됨

**기준:**

- ✅ 좋음: **0.1 이하**
- ⚠️ 개선 필요: 0.1~0.25
- ❌ 나쁨: 0.25 이상

**측정 시점:** 초기 페이지 로드 중

---

## 💡 왜 중요한지

### 비즈니스 임팩트

- **구글**: 로딩 속도 500ms 증가 → 트래픽 20% 감소
- **아마존**: 100ms 지연 → 매출 1% 감소
- **핀터레스트**: 대기 시간 40% 감소 → 트래픽·가입자 15% 증가

### 4대 핵심 가치

1. **사용자 유지**: 성능↑ = 참여도·충성도↑
2. **사용자 경험**: 느린 웹사이트 = 스트레스·이탈률↑
3. **전환율**: 로딩 속도가 구매 등 전환율에 직접 영향
4. **비용 절감**: 페이지 크기 = 모바일 데이터 요금

---

## 📈 측정 방법

### 실험실 도구 (Lab Tools)

통제된 환경(개발자 기기)에서 시뮬레이션

- **Lighthouse**: 크롬 개발자 도구 내장. 실제 상호작용이 없어 FID 대신 **TBT(Total Blocking Time)** 측정
- **Performance Insights**: 프레임 단위 분석 가능
- **Coverage Panel**: 사용하지 않는 JS/CSS 비율 확인

### 필드 도구 (Field Tools)

실제 사용자 데이터 수집

- **CrUX**: 실제 사용자 경험 데이터 세트 (PageSpeed Insights에서 활용)
- **Web Vitals 라이브러리**: JS로 실제 브라우저에서 직접 측정

---

## 🚀 최적화 핵심 방법

### LCP 개선

- **CDN 최적화**: 이커머스 사이트의 CDN을 도쿄에서 서울로 변경 → 메인 배너 이미지 로딩 시간 2.8초→0.4초 (7배 향상)
- **이미지 압축**: 블로그 썸네일 원본 5.2MB를 WebP 포맷으로 변환 및 압축 → 42KB로 감소 (98% 절감), 로드 속도 12배 개선
- **반응형 이미지**: 패션 쇼핑몰에서 `srcset` 적용 → 데스크톱은 1920px, 모바일은 375px 이미지 제공하여 모바일 로딩 시간 65% 단축

### INP 개선

- **코드 분할**: 관리자 페이지 코드를 `React.lazy`로 분리 → 일반 사용자 초기 번들 크기 3.8MB→1.9MB (50% 감소), 첫 클릭 반응 속도 180ms 개선
- **무거운 라이브러리 지연 로드**: 차트 라이브러리를 동적 임포트로 변경 → 메인 페이지 INP 350ms→150ms로 개선

### CLS 개선

- **이미지 크기 명시**: 뉴스 사이트의 기사 썸네일에 `width="800" height="450"` 추가 → CLS 0.52→0.03으로 개선
- **광고 영역 예약**: 배너 광고 자리에 미리 360px 높이 확보 → 콘텐츠 밀림 현상 제거, CLS 0.38→0.08로 79% 개선
- **폰트 로딩 최적화**: `font-display: swap` 대신 `font-display: optional` 사용 → 웹폰트 로딩 시 텍스트 리플로우 방지, CLS 0.15→0.02

각 지표는 로딩, 상호작용, 시각적 안정성이라는 사용자 경험의 핵심 요소를 측정하며, SEO와 비즈니스 성과에 직접적 영향을 미침

## References

https://web.dev/articles/vitals
https://web.dev/articles/optimize-lcp
https://web.dev/articles/optimize-inp
https://web.dev/articles/optimize-cls
https://www.youtube.com/watch?v=IRj9vKBy9CA
